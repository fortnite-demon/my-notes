**Сортируйте слои сборки**  
  - Поместите часто изменяемые слои сборки «вниз», а редко изменяемые — «вверх».
  
**Уменьшайте размер слоёв сборки:**  
  - копируйте только нужные файлы  
  - устанавливайте только необходимые зависимости  
  - минимизируйте количество слоев  
  - используйте Alpine и Slim образы  
  - используйте multi-stage builds
  
**Общие рекомендации:**  
  - создавайте stateless контейнеры  
  - разделяйте приложения по контейнерам  
  - указывайте версию базового образа  
  - правильно используйте CMD и ENTRYPOINT (например у postgres entrypoint)
  - прописывайте свои сервисы в $PATH  
  - правильно используйте ADD и COPY  
  - при возможности используйте официальные базовые образы  
  - не храните чувствительную информацию в образах  

### После apt update и pip install остаётся кеш, чтобы сделать сборку легче:
```Dockerfile
...
RUN apt-get update \
    && apt-get install -y --no-install-recommends gcc \
    && rm -rf /var/lib/apt/lists/*
...
RUN --mount=type=bind,source=requirements.txt,target=requirements.txt \
    pip install --no-cache-dir -r requirements.txt
```

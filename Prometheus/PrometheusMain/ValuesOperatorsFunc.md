## Функции (работают с различными типами метрик)

- ```rate()``` - Функция rate принимает на вход range vector - берет разность последнего и первого значения и делит их на количество секунд в интервале например [1m] 60s - таким образом вы получаете скорость роста счетчика. Только с типом данных counter.
- ```irate()``` - Всё тоже самое, но берётся значение последнего и предпоследнего.

#### Примеры
```
"sum by (instance) (rate(prometheus_http_requests_total{}[2m]))"
```

## Операторы агрегирования

- ```sum``` - суммирование
- ```min``` - взять минимальное значение
- ```max``` - взять максимальное значение
- ```avg``` - взять среднее значение
- ```count``` - подсчитать количество элементов в векторе

Так же можно сделать разбивку:
```
user@desktop:~$ promtool query instant http://localhost:9090/ "sum by (job) (up)"
{job="python"} => 1 @[1622720298.153]
{job="prometheus"} => 1 @[1622720298.153]
```

## Типы данных в promql
- Instant Vector - несколько time series метрик, которые отражают одно значение за определенное время, например:

  ```
  user@desktop:~$ promtool query instant http://localhost:9090 "up[1m]"
  up{instance="localhost:8000", job="job"} => 1 @[1729933682.296]
  ```

- Range Vector - несколько time series метрик, которые отражают несколько значений за определенный интервал времени, например:

  ```
  user@desktop:~$ promtool query instant http://localhost:9090 "up[1m]"
  up{instance="localhost:8000", job="myjb"} =>
  0 @[1729933700.096]
  0 @[1729933715.093]
  0 @[1729933730.097]
  0 @[1729933745.093]
  ```

- Scalar - простые числа с плавающей запятой. Можно использовать их, например, прибавляя к метрикам или умножая на них.

